# 링크 노트 태스크 단위 작업 계획서

> 이 문서는 프롬프트를 초기화하면서 작업할 수 있도록, 각 태스크가 독립적으로 실행 가능하게 구성되어 있습니다.
> 각 태스크는 해당 섹션만 읽고도 작업을 완료할 수 있도록 충분한 컨텍스트를 포함합니다.

---

## 작업 현황 체크리스트

| 순서 | 태스크 ID | 태스크명 | 상태 | 테스트 | 노션 | 의존성 |
|------|-----------|----------|------|--------|------|--------|
| 1 | ENV-01 | 서버 환경 변수 및 설정 구성 | ✅ 완료 | ✅ | ✅ | 없음 |
| 2 | DB-01 | Supabase 프로젝트 생성 및 테이블 설정 | ✅ 완료 | ✅ | ✅ | ENV-01 |
| 3 | SERVER-01 | 서버 로컬 실행 및 기본 API 테스트 | ✅ 완료 | ✅ | ✅ | DB-01 |
| 4 | BE-01 | YouTube 메타데이터 추출 개선 | ✅ 완료 | ✅ | ✅ | SERVER-01 |
| 5 | BE-02 | 서버 에러 핸들링 및 로깅 시스템 | ✅ 완료 | ✅ | ✅ | BE-02 |
| 6 | AI-01 | AI 요약 프롬프트 최적화 | ✅ 완료 | ✅ | ✅ | BE-02 |
| 7 | AI-02 | AI 태그 및 카테고리 분류 개선 | ✅ 완료 | ✅ | ✅ | AI-01 |
| 8 | AI-03 | AI 요청 실패 시 폴백 처리 | ✅ 완료 | ✅ | ✅ | AI-02 |
| 9 | BE-03 | 링크 삭제 API 구현 | ✅ 완료 | ✅ | ✅ | AI-03 |
| 10 | BE-04 | 링크 중복 저장 방지 | ✅ 완료 | ✅ | ✅ | BE-03 |
| 11 | APP-01 | 앱 환경 변수 및 API 연결 설정 | ✅ 완료 | ✅ | ✅ | BE-04 |
| 12 | APP-02 | 홈 화면 FAB 버튼 및 네비게이션 개선 | ✅ 완료 | ✅ | ✅ | APP-01 |
| 13 | APP-03 | 링크 상세 화면 구현 | ✅ 완료 | ✅ | ✅ | APP-02 |
| 14 | APP-04 | 링크 삭제 기능 (앱) | ✅ 완료 | ✅ | ✅ | APP-03 |
| 15 | APP-05 | Android 공유 인텐트 수신 구현 | ✅ 완료 | ✅ | ✅ | APP-04 |
| 16 | APP-06 | iOS 공유 익스텐션 기본 설정 | ✅ 완료 | ✅ | ✅ | APP-05 |
| 17 | APP-07 | 에러 처리 및 토스트 메시지 시스템 | ✅ 완료 | ✅ | ✅ | APP-06 |
| 18 | APP-08 | 로딩 상태 및 스켈레톤 UI 구현 | ✅ 완료 | ✅ | ✅ | APP-07 |
| 19 | APP-09 | 앱 아이콘 및 스플래시 화면 설정 | ✅ 완료 | ✅ | ✅ | APP-08 |
| 20 | SERVER-02 | 서버 배포 (Railway/Render) | ✅ 완료 | ✅ | ✅ | APP-09 |
| 21 | APP-10 | 프로덕션 API URL 설정 및 빌드 테스트 | ✅ 완료 | ✅ | ✅ | SERVER-02 |
| 22 | APP-11 | EAS Build 설정 및 APK/IPA 빌드 | ✅ 완료 | ✅ | ✅ | APP-10 |

**상태 범례**: ⬜ 대기 | 🔄 진행중 | ✅ 완료 | ❌ 실패

---

## ⚠️ 작업 주의사항

1. **작업 완료 후 노션 문서화 필수**
   - 각 태스크 완료 후 [노션 Task 페이지](https://www.notion.so/Task-2ed96b78642980bb8314e7cc97eb42de)에 새 페이지를 생성하여 다음 내용을 작성합니다:
     - 작업 내용 요약
     - 완성도 (%)
     - 개선점
     - 인사이트

2. **태스크 처리 원칙**
   - 별도 요청이 없으면 **한 번에 하나의 태스크만** 처리합니다
   - 다음 태스크 진행 전 사용자 확인을 받습니다

3. **완료된 작업 아카이브**
   - 작업이 완료되면 해당 작업의 상세 내용은 `COMPLETED_TASKS.md` 파일로 이동합니다
   - 이 파일에는 체크리스트와 다음 작업에 필요한 컨텍스트만 유지합니다

4. **TASKS.md 최신화 체크**
   - 각 작업이 끝날 때마다 이 파일의 상태가 최신화되어 있는지 확인합니다
   - 체크리스트 상태 업데이트 확인
   - 불필요한 내용 정리 확인

---

## 완료된 작업 요약

> 상세 내용은 `COMPLETED_TASKS.md` 파일 참조

### PHASE 1: 환경 설정 ✅
- **ENV-01**: `.env` 파일 생성, Supabase/OpenAI 키 설정
- **DB-01**: Supabase `links` 테이블 생성, RLS 정책 적용
- **SERVER-01**: FastAPI 서버 실행 확인, 기본 API 테스트 통과

### PHASE 2: 백엔드 기능 개선 ✅
- **BE-01**: YouTube 메타데이터 추출 개선
  - URL 유효성 검사, 정규화 함수 추가
  - 비공개/삭제/지역제한 영상 에러 처리
  - 재시도 로직 구현
- **BE-02**: 로깅 및 에러 핸들링 시스템 구축
  - `app/core/logging.py`: 구조화된 로깅
  - `app/core/exceptions.py`: 커스텀 예외 클래스
  - 전역 예외 핸들러 등록

### PHASE 3: AI 기능 개선 ✅
- **AI-01**: AI 요약 프롬프트 최적화 완료
- **AI-02**: AI 태그 및 카테고리 분류 개선 완료
- **AI-03**: AI 요청 실패 시 폴백 처리 완료
  - 재시도 데코레이터 (`retry_on_failure`)
  - OpenAI 클라이언트 타임아웃 설정 (30초)
  - Rate Limit / 연결 에러 전용 처리
  - 14개 유닛 테스트 통과

### PHASE 2 추가: 백엔드 기능 (계속)
- **BE-03**: 링크 삭제 API 구현 완료
  - `database.py`에 `delete_link()` 메서드 추가
  - `DELETE /api/links/{link_id}` 엔드포인트 구현
  - UUID 형식 검증 추가 (400 에러)
  - 존재하지 않는 링크 처리 (404 에러)
  - 3개 테스트 케이스 통과
- **BE-04**: 링크 중복 저장 방지 완료
  - `database.py`에 `get_link_by_url()` 메서드 추가
  - URL 정규화 후 중복 체크
  - 409 Conflict 응답 (X-Existing-Link-Id 헤더 포함)
  - 8개 테스트 케이스 통과

---

# 다음 작업: APP-07

---

# PHASE 4: 앱 기능 구현

### APP-01 완료 요약
- `app.config.js` 생성 (환경 변수 노출)
- `src/config/index.ts` 생성 (환경 변수 접근)
- `src/services/api.ts` 수정 (환경 변수 사용, deleteLink 추가)
- `.env` 파일 생성
- TypeScript 타입 체크 통과

### APP-02 완료 요약
- HomeScreen에 FAB 버튼 추가 (+ 버튼)
- FAB 클릭 시 SaveLink 화면으로 이동
- `useFocusEffect` 사용하여 화면 포커스 시 목록 새로고침
- 저장 완료 후 1.5초 뒤 자동으로 홈 화면 복귀
- 빈 상태 화면에도 FAB 표시

### APP-03 완료 요약
- `LinkDetailScreen.tsx` 생성 (링크 상세 화면)
- 썸네일, 제목, 카테고리, 요약, 태그, 저장일 표시
- "YouTube에서 보기" 버튼 (빨간색)
- "공유하기" 버튼 (Share API 사용)
- LinkCard 클릭 시 상세 화면으로 이동

### APP-04 완료 요약
- LinkDetailScreen에 삭제 버튼 추가 (빨간 테두리)
- 삭제 확인 Alert 표시
- linkApi.deleteLink() 호출
- 삭제 완료 후 홈 화면으로 자동 복귀
- 삭제 중 로딩 인디케이터 표시

### APP-05 완료 요약
- `expo-share-intent` 라이브러리 설치
- app.config.js에 플러그인 설정
- App.tsx에 ShareIntentProvider 래핑
- YouTube URL 자동 추출 및 SaveLink 화면으로 전달
- SaveLinkScreen에서 params URL 변경 감지

### APP-06 완료 요약
- iOS Share Extension 설정 추가 (`iosShareExtensionName: 'LinkNoteShare'`)
- iOS 활성화 규칙 설정 (텍스트 및 URL 지원)
- APP-05에서 구현한 코드가 iOS에서도 동일하게 작동
- 실제 테스트는 EAS Build 후 가능

### 간략 목록

| 태스크 ID | 제목 | 핵심 테스트 |
|-----------|------|-------------|
| APP-01 | 앱 환경 변수 및 API 연결 설정 | 앱-서버 통신 확인 |
| APP-02 | 홈 화면 FAB 버튼 및 네비게이션 개선 | FAB → SaveLink 화면 이동 |
| APP-03 | 링크 상세 화면 구현 | 카드 클릭 → 상세 화면 |
| APP-04 | 링크 삭제 기능 (앱) | 삭제 확인 → 삭제 실행 |
| APP-05 | Android 공유 인텐트 수신 | 유튜브 앱에서 공유 → URL 수신 |
| APP-06 | iOS 공유 익스텐션 기본 설정 | Safari에서 공유 → URL 수신 |
| APP-07 | 에러 처리 및 토스트 메시지 | 성공/실패 시 토스트 표시 |
| APP-08 | 로딩 상태 및 스켈레톤 UI | 로딩 중 스켈레톤 표시 |
| APP-09 | 앱 아이콘 및 스플래시 화면 | 커스텀 아이콘/스플래시 |
| SERVER-02 | 서버 배포 | 클라우드 URL에서 API 응답 |
| APP-10 | 프로덕션 API URL 설정 | 실제 디바이스에서 서버 통신 |
| APP-11 | EAS Build 설정 | APK/IPA 빌드 성공 |

---

## 부록: 태스크 실행 가이드

### 새 세션에서 태스크 시작하기

```
프로젝트: LinkNote (링크 노트)
경로: /Users/jeongseyun/Project/LinkNote

TASKS.md의 [태스크 ID] 작업을 진행해줘.

현재 상태:
- [이전 태스크 완료 여부]
- [관련 환경 정보]
```

### 태스크 완료 시 체크리스트

1. [ ] 모든 작업 내용 완료
2. [ ] 모든 테스트 케이스 실행
3. [ ] 테스트 결과 체크 완료
4. [ ] 작업 현황 체크리스트 상태 업데이트 (⬜ → ✅)
5. [ ] 테스트 열 업데이트 (⬜ → ✅)
6. [ ] 노션 문서화 페이지 작성
7. [ ] 완료된 작업 상세 내용 COMPLETED_TASKS.md로 이동
8. [ ] TASKS.md 최신화 확인

---

## 버전 히스토리

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2024-01-19 | 초기 작성 |
| 2.0 | 2024-01-19 | AI/백엔드 태스크 추가, 테스트 섹션 추가 |
| 3.0 | 2024-01-19 | 완료된 작업 아카이브 정책 추가, 토큰 최적화 |
